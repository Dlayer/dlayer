<?php

/**
 * Generate the content navigation controls for the content item
 *
 * @author Dean Blackborough <dean@g3d-development.com>
 * @copyright G3D Development Limited
 * @license https://github.com/Dlayer/dlayer/blob/master/LICENSE
 */
class Dlayer_View_ContentNavigationControls extends Zend_View_Helper_Abstract
{
    /**
     * Override the hinting for the view property so that we can see the view
     * helpers that have been defined
     *
     * @var Dlayer_View_Codehinting
     */
    public $view;

    private $column_column_id;
    private $column_row_id;
    private $row_column_id;
    private $row_row_id;

    /**
     * Set the ids for the links
     *
     * @param integer $column_column_id
     * @param integer $column_row_id
     * @param integer $row_column_id
     * @param integer $row_row_id
     *
     * @return Dlayer_View_ContentNavigationControls
     */
    public function contentNavigationControls($column_column_id, $column_row_id, $row_column_id, $row_row_id)
    {
        $this->resetParams();

        $this->column_column_id = $column_column_id;
        $this->column_row_id = $column_row_id;
        $this->row_column_id = $row_column_id;
        $this->row_row_id = $row_row_id;

        return $this;
    }

    /**
     * Reset any internal params, we need to reset the params in case the view helper is called multiple times
     * within the same view script.
     *
     * @return void
     */
    public function resetParams()
    {
        $this->column_column_id = null;
        $this->column_row_id = null;
        $this->row_column_id = null;
        $this->row_row_id = null;
    }

    /**
     * Generate the further reading html
     *
     * @return string
     */
    private function render()
    {
        $html = '<div class="col-md-12 col-sm-12">
            <a class="btn btn-sm btn-info" href="/content/design/set-selected-column/id/' . $this->view->escape($this->column_column_id) . '/row/' . $this->view->escape($this->column_row_id) . '">Select column</a>
            <a class="btn btn-sm btn-info" href="/content/design/set-selected-row/id/' . $this->view->escape($this->row_row_id) . '/column/' . $this->view->escape($this->row_column_id) . '">Select row</a>
            </div>';

        return $html;
    }

    /**
     * The view helpers can be output directly, we define the __toString method so that echo and print calls on the
     * object return the html generated by the render method
     *
     * @return string The generated html
     */
    public function __toString()
    {
        return $this->render();
    }
}
