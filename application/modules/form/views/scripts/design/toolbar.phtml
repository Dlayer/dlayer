<?php /** @var Dlayer_View_Codehinting */ $this ?>

<?php 
$groups = array(
	1=>'', 
	2=>'Options <small>Form options</small>',
	3=>'Preset fields <small>Quickly create fields using presets</small>',
	4=>'Standard fields <small>Create fields using the base types</small>'
);

foreach($this->tools as $group_id => $group) {

	$html = '';

	foreach($group as $tool) {

		$show = FALSE;
		$selected = FALSE;
		
		switch($tool['group_id']) {
			case 1:
			case 0:
				$show = TRUE;				
			break;

			case 2:
				if($this->tool !== NULL)
				{
					$show = TRUE;
				}
			break;
				
			default:
			break;
		}
				
		// Set selected status for tool
		if($this->tool !== FALSE && $this->tool['tool'] === $tool['model'])
		{
			$selected = TRUE;
		}
		
		$reset = NULL;

		if($show === TRUE)
		{
			if($this->field_id === NULL)
			{
				$reset = NULL;
			}
			else
			{
				$reset = '/reset/1';
			}
			
			$class = "btn btn-default btn-sm";
			
			if($selected === TRUE)
			{
				$class = "btn btn-primary btn-sm";
			}
			
			if($tool['model'] === 'Cancel')
			{
				$class = "btn btn-danger hidden-lg";
			}
			
			$html .= '<a href="/form/design/set-tool/tool/' . 
			$tool['model'] . $reset . '"class="' . $class . '">' .
			$tool['name'] . '</a> ';
		}
	}

	if(strlen($html) > 0)
	{
		echo '<div class="row">';
		echo '<div class="col-xs-12">';
		if(strlen($groups[$group_id]) > 0)
		{
			echo '<h4 class="tool-row-' . $group_id . '"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span> ' . $groups[$group_id] . '</h4>';
		}
		echo '<div class="tool-row-' . $group_id . '">';
		echo $html;
		echo '</div>';
		echo '</div>';
		echo '</div>';
	}
} 
?>
