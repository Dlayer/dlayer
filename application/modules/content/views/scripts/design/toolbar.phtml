<?php /** @var $this Dlayer_View_Codehinting */ ?>

<?php 

/**
* @todo Need to update this, use database come up with a cleaner, more 
* re-usable solution
*/

$groups = array(
	1=>'', 
	2=>'Structure <small>Change page structure</small>',
	3=>'Create <small>Create a new item</small>',
	4=>'Import <small>Create a new item from existing data</small>'
);

foreach($this->tools as $group_id => $group) {

	$html = '';

	foreach($group as $tool) {

		$show = FALSE;
		$selected = FALSE;
		
		// Show cancel tool
		if($this->div_id != NULL && $tool['tool'] == 'cancel') {
			$show = TRUE;
		}
		
		// Show content row tool if div selected
		if($this->div_id != NULL && $tool['tool'] == 'content-row') {
			$show = TRUE;
		}
		
		// Show content tools if row selected
		if($this->div_id != NULL && $this->content_row_id != NULL) {
			$show = TRUE;
		}
		
		// Hide content row tool if content row selected
		if($this->div_id != NULL && $this->content_row_id != NULL 
			&& $tool['tool'] == 'content-row') {
			$show = FALSE;
		}
		
		// Hide move row tool if content id or other tool selected
		if($tool['tool'] == 'move-row') {
			if($this->content_id != NULL || $this->tool != FALSE) {
				if($this->tool['tool'] != 'move-row') {
					$show = FALSE;
				} else {
					$show = TRUE;
				}
			}
		}
		
		// Set selected status for tool
		if($this->tool['tool'] == $tool['tool']) {
			$selected = TRUE;
		}
		
		$reset = NULL;

		if($show == TRUE) {
			if($this->content_id != NULL) {
				$reset = '/reset/1';
			}
			
			$class = "btn btn-default";
			
			if($selected == TRUE) {
				$class = "btn btn-primary";
			}
			
			if($tool['tool'] == 'cancel') {
				$class = "btn btn-danger";
			}
			
			$html .= '<a href="/content/design/set-tool/tool/' . 
			$tool['tool'] . $reset . '"class="' . $class . '">' . 
			$tool['name'] . '</a> ';
		}
	}

	if(strlen($html) > 0) {
		echo '<div class="row">' . PHP_EOL;
		echo '<div class="col-xs-12">' . PHP_EOL;
		echo '<div class="btn-group btn-group-sm" role="group">' . PHP_EOL;
		if(strlen($groups[$group_id]) > 0) {
			echo '<h4>' . $groups[$group_id] . '</h4>' . PHP_EOL;
		}
		echo $html;
		echo '</div>' . PHP_EOL;
		echo '</div>' . PHP_EOL;
		echo '</div>' . PHP_EOL;
	}
} 
?>